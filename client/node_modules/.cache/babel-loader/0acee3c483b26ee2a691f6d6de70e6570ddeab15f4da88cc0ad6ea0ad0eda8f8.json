{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/University/4year/InfSec/soi3/client/src/App.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport './App.css';\n\n// import components \nimport KeyModal from './components/KeyModal';\nimport Navbar from './components/Navbar';\nimport Profile from './components/Profile';\nimport UserInfo from './components/UserInfo';\nimport Privs from './components/Privs';\n\n// import ui components\nimport { MDBCol, MDBContainer, MDBRow } from 'mdb-react-ui-kit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [roleSettingsModal, setRoleSettingsModal] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [userNumId, setUserNumId] = useState(1);\n  const [userId, setUserId] = useState(\"@nobody\");\n  const [userName, setUserName] = useState(\"Nobody\");\n  const [userInfo, setUserInfo] = useState();\n  const [userToView, setUserToView] = useState(0);\n  const [userPrivInfo, setUserPrivInfo] = useState();\n  const [usersInfo, setUsersInfo] = useState([]);\n\n  // check privlgs of user and get another user info\n  const handleGetAnotherUserInfo = id => {\n    if ((userPrivInfo === null || userPrivInfo === void 0 ? void 0 : userPrivInfo.view) != \"0\") {\n      // Retrieving another user info\n      let count = 1;\n      users.map(user => {\n        if (user.id == id) {\n          setUserToView(count);\n          fetch(`http://localhost:5000/get_user_info?id=${count}`).then(res => res.json()).then(data => {\n            setUserInfo(data);\n            console.log(data);\n          });\n        }\n        count++;\n      });\n      console.log(\"\\nyou are viewing \", id);\n    } else {\n      alert(\"Not enough privilliges!\");\n    }\n  };\n\n  // check privgs for copying info\n  const handleCopyInfo = e => {\n    if ((userPrivInfo === null || userPrivInfo === void 0 ? void 0 : userPrivInfo.copy) == \"0\") {\n      e.preventDefault();\n      alert(\"Not enough privilliges!\");\n      return false;\n    }\n  };\n\n  // log in as another user\n  const handleSwitchRole = id => {\n    setRoleSettingsModal(true);\n    if (!roleSettingsModal) {\n      setUserId(id);\n      //setUserInfo(new Array());\n      console.log(\"id : \", userId);\n      let count = 1;\n      users.map(user => {\n        if (user.id == id) {\n          setUserNumId(count);\n          setUserName(user.name);\n          console.log(\"found user\", user);\n\n          // Get user info\n          fetch(`http://localhost:5000/get_user_info?id=${count}`).then(res => res.json()).then(data => {\n            setUserInfo(data);\n            console.log(data);\n          });\n          // Get user privilleges\n          fetch(`http://localhost:5000/get_role_priv?role=${user.role}`).then(res => res.json()).then(data => {\n            setUserPrivInfo(data);\n            console.log(\"privs: \", data);\n          });\n        }\n        count++;\n      });\n      console.log(\"\\nyou are now \", id);\n    }\n  };\n  useEffect(() => {\n    fetch(\"http://localhost:5000/get_users\").then(res => res.json()).then(data => {\n      setUsers(data);\n      console.log(data);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    style: {\n      backgroundColor: '#0D1116',\n      color: 'white',\n      height: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(KeyModal, {\n      userId: userNumId,\n      roleSettingsModal: roleSettingsModal,\n      setRoleSettingsModal: setRoleSettingsModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Navbar, {\n      users: users,\n      handleSwitchRole: handleSwitchRole,\n      roleSettingsModal: roleSettingsModal,\n      setRoleSettingsModal: setRoleSettingsModal,\n      canChangePrivlgs: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MDBContainer, {\n      className: \"py-5 mt-4\",\n      children: /*#__PURE__*/_jsxDEV(MDBRow, {\n        children: [/*#__PURE__*/_jsxDEV(MDBCol, {\n          lg: \"4\",\n          children: /*#__PURE__*/_jsxDEV(Profile, {\n            userName: userName,\n            userId: userId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n          lg: \"8\",\n          children: [/*#__PURE__*/_jsxDEV(UserInfo, {\n            users: users,\n            handleGetAnotherUserInfo: handleGetAnotherUserInfo,\n            userInfo: userInfo,\n            handleCopyInfo: handleCopyInfo,\n            userPrivInfo: userPrivInfo,\n            userId: userId,\n            userNumId: userToView\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n            children: /*#__PURE__*/_jsxDEV(MDBCol, {\n              children: /*#__PURE__*/_jsxDEV(Privs, {\n                userPrivInfo: userPrivInfo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"y0+oQHTzft8+2EGh/mp73+/y5v0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","KeyModal","Navbar","Profile","UserInfo","Privs","MDBCol","MDBContainer","MDBRow","jsxDEV","_jsxDEV","App","_s","roleSettingsModal","setRoleSettingsModal","users","setUsers","userNumId","setUserNumId","userId","setUserId","userName","setUserName","userInfo","setUserInfo","userToView","setUserToView","userPrivInfo","setUserPrivInfo","usersInfo","setUsersInfo","handleGetAnotherUserInfo","id","view","count","map","user","fetch","then","res","json","data","console","log","alert","handleCopyInfo","e","copy","preventDefault","handleSwitchRole","name","role","style","backgroundColor","color","height","children","fileName","_jsxFileName","lineNumber","columnNumber","canChangePrivlgs","className","lg","_c","$RefreshReg$"],"sources":["/Users/mac/Desktop/University/4year/InfSec/soi3/client/src/App.tsx"],"sourcesContent":["import {useState, useEffect} from 'react';\nimport './App.css';\n\n// import components \nimport KeyModal from './components/KeyModal';\nimport Navbar from './components/Navbar';\nimport Profile from './components/Profile';\nimport UserInfo from './components/UserInfo';\nimport Privs from './components/Privs';\n\n// import ui components\nimport {\n  MDBCol,\n  MDBContainer,\n  MDBRow,\n} from 'mdb-react-ui-kit';\n\nfunction App() {\n  const [roleSettingsModal, setRoleSettingsModal] = useState(false);\n  const [users, setUsers] = useState<Array<user>>([]);\n  const [userNumId, setUserNumId] = useState<number>(1);\n  const [userId, setUserId] = useState<string>(\"@nobody\");\n  const [userName, setUserName] = useState<string>(\"Nobody\");\n  const [userInfo, setUserInfo] = useState<Info>();\n  const [userToView, setUserToView] = useState<number>(0);\n  const [userPrivInfo, setUserPrivInfo] = useState<Privs>();  \n  const [usersInfo, setUsersInfo] = useState<Array<Privs>>([]);\n    \n  // check privlgs of user and get another user info\n  const handleGetAnotherUserInfo = (id: string) => {\n    if(userPrivInfo?.view != \"0\")\n    {\n      // Retrieving another user info\n      let count = 1;\n      users.map((user : user) => {\n        if(user.id == id) {\n          setUserToView(count);\n          fetch(`http://localhost:5000/get_user_info?id=${count}`).then(\n            res => res.json()\n          ).then(\n            data => {\n              setUserInfo(data)\n              console.log(data)\n            }\n          );\n        }\n        count++;\n      })\n      console.log(\"\\nyou are viewing \", id);\n    }\n    else {\n      alert(\"Not enough privilliges!\");\n    }\n  }\n  \n  // check privgs for copying info\n  const handleCopyInfo = (e : any) => {\n    if(userPrivInfo?.copy == \"0\")\n    {\n      e.preventDefault();\n      alert(\"Not enough privilliges!\")\n      return false;      \n    }\n  }\n  \n  // log in as another user\n  const handleSwitchRole = (id : string) => {\n    setRoleSettingsModal(true);\n    if(!roleSettingsModal)\n    {\n      setUserId(id);\n      //setUserInfo(new Array());\n      console.log(\"id : \", userId);\n      let count = 1;\n      users.map((user : user) => {\n        if(user.id == id) {\n          setUserNumId(count);\n          setUserName(user.name);\n          console.log(\"found user\", user)\n          \n          // Get user info\n          fetch(`http://localhost:5000/get_user_info?id=${count}`).then(\n            res => res.json()\n          ).then(\n            data => {\n              setUserInfo(data)\n              console.log(data)\n            }\n          )\n          // Get user privilleges\n          fetch(`http://localhost:5000/get_role_priv?role=${user.role}`).then(\n            res => res.json()\n          ).then(\n            data => {\n              setUserPrivInfo(data)\n              console.log(\"privs: \", data);\n            }\n          )\n        }\n        count++;\n      })\n      \n      console.log(\"\\nyou are now \", id);\n    }\n  }\n  \n  useEffect(() => {\n    fetch(\"http://localhost:5000/get_users\").then(\n      res => res.json()\n    ).then(\n      data => {\n        setUsers(data)\n        console.log(data)\n      }\n    )\n  }, [])\n  \n  return (\n    <section style={{ backgroundColor: '#0D1116', color: 'white', height: \"100%\" }}>\n      \n      {/* Modal with settings */}\n      {/* <Modal roleSettingsModal={roleSettingsModal} setRoleSettingsModal={setRoleSettingsModal} users={users} usersInfo={usersInfo}/> */}\n      {/* Modal with password */}\n      <KeyModal userId={userNumId} roleSettingsModal={roleSettingsModal} setRoleSettingsModal={setRoleSettingsModal} />\n      {/* Navigation bar */}\n      <Navbar users={users} handleSwitchRole={handleSwitchRole} roleSettingsModal={roleSettingsModal} setRoleSettingsModal={setRoleSettingsModal} canChangePrivlgs={false}/>\n      \n      {/* Main content */}\n      <MDBContainer className=\"py-5 mt-4\">\n        <MDBRow>\n          <MDBCol lg=\"4\">\n            \n            {/* Card for profile avatar and actions */}\n            <Profile userName={userName} userId={userId}/>\n          \n          </MDBCol>\n          <MDBCol lg=\"8\">\n            \n            {/* Card with important selected info */}\n            <UserInfo users={users} handleGetAnotherUserInfo={handleGetAnotherUserInfo} userInfo={userInfo} handleCopyInfo={handleCopyInfo} userPrivInfo={userPrivInfo} userId={userId} userNumId={userToView}/>\n            \n            <MDBRow>\n              <MDBCol>\n                \n                {/* Card showing which rights do u have */}\n                <Privs userPrivInfo={userPrivInfo} />\n              \n              </MDBCol>\n            </MDBRow>\n          </MDBCol>\n        </MDBRow>\n      </MDBContainer>\n    </section>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}