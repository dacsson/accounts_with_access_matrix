{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/University/4year/InfSec/soi3/client/src/App.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport './App.css';\n\n// import components \nimport Modal from './components/Modal';\nimport Navbar from './components/Navbar';\nimport Profile from './components/Profile';\nimport UserInfo from './components/UserInfo';\nimport Privs from './components/Privs';\n\n// import ui components\nimport { MDBCol, MDBContainer, MDBRow } from 'mdb-react-ui-kit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [roleSettingsModal, setRoleSettingsModal] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [userNumId, setUserNumId] = useState(1);\n  const [userId, setUserId] = useState(\"@admin\");\n  const [userName, setUserName] = useState(\"Admin\");\n  const [userInfo, setUserInfo] = useState();\n  const [userToView, setUserToView] = useState(\"@admin\");\n  const [userPrivInfo, setUserPrivInfo] = useState();\n  const [editMode, setEditMode] = useState(false);\n\n  // turn on or off editing users info\n  const toggleEditMode = () => setEditMode(!editMode);\n\n  // check privlgs of user and get another user info\n  const handleGetAnotherUserInfo = id => {\n    if ((userPrivInfo === null || userPrivInfo === void 0 ? void 0 : userPrivInfo.view) != \"0\") {\n      // Retrieving another user info\n      setUserToView(id);\n      let count = 1;\n      users.map(user => {\n        if (user.id == id) {\n          fetch(`http://localhost:5000/get_user_info?id=${count}`).then(res => res.json()).then(data => {\n            setUserInfo(data);\n            console.log(data);\n          });\n        }\n        count++;\n      });\n      console.log(\"\\nyou are viewing \", id);\n    } else {\n      alert(\"Not enough privilliges!\");\n    }\n  };\n\n  // check privgs for copying info\n  const handleCopyInfo = e => {\n    if ((userPrivInfo === null || userPrivInfo === void 0 ? void 0 : userPrivInfo.copy) == \"0\") {\n      e.preventDefault();\n      alert(\"Not enough privilliges!\");\n      return false;\n    }\n  };\n\n  // log in as another user\n  const handleSwitchRole = id => {\n    setUserId(id);\n    console.log(\"id : \", userId);\n    let count = 1;\n    users.map(user => {\n      if (user.id == id) {\n        setUserNumId(count);\n        setUserName(user.name);\n        console.log(\"found user\", user);\n\n        // Get user info\n        fetch(`http://localhost:5000/get_user_info?id=${count}`).then(res => res.json()).then(data => {\n          setUserInfo(data);\n          console.log(data);\n        });\n        // Get user privilleges\n        fetch(`http://localhost:5000/get_role_priv?role=${user.role}`).then(res => res.json()).then(data => {\n          setUserPrivInfo(data);\n          console.log(\"privs: \", data);\n        });\n      }\n      count++;\n    });\n    console.log(\"\\nyou are now \", id);\n  };\n  useEffect(() => {\n    fetch(\"http://localhost:5000/get_users\").then(res => res.json()).then(data => {\n      setUsers(data);\n      console.log(data);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    style: {\n      backgroundColor: '#0D1116',\n      color: 'white',\n      height: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      roleSettingsModal: roleSettingsModal,\n      setRoleSettingsModal: setRoleSettingsModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Navbar, {\n      users: users,\n      handleSwitchRole: handleSwitchRole,\n      roleSettingsModal: roleSettingsModal,\n      setRoleSettingsModal: setRoleSettingsModal,\n      canChangePrivlgs: (userPrivInfo === null || userPrivInfo === void 0 ? void 0 : userPrivInfo.edit_priv) != \"0\" ? true : false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MDBContainer, {\n      className: \"py-5 mt-4\",\n      children: /*#__PURE__*/_jsxDEV(MDBRow, {\n        children: [/*#__PURE__*/_jsxDEV(MDBCol, {\n          lg: \"4\",\n          children: /*#__PURE__*/_jsxDEV(Profile, {\n            userName: userName,\n            userId: userId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBCol, {\n          lg: \"8\",\n          children: [/*#__PURE__*/_jsxDEV(UserInfo, {\n            users: users,\n            handleGetAnotherUserInfo: handleGetAnotherUserInfo,\n            editMode: editMode,\n            userInfo: userInfo,\n            handleCopyInfo: handleCopyInfo,\n            toggleEditMode: toggleEditMode,\n            userPrivInfo: userPrivInfo,\n            userId: userId,\n            userNumid: userNumId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n            children: /*#__PURE__*/_jsxDEV(MDBCol, {\n              children: /*#__PURE__*/_jsxDEV(Privs, {\n                userPrivInfo: userPrivInfo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"nOr5rw2+5ICDTfuV/5myDCzaWoE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Modal","Navbar","Profile","UserInfo","Privs","MDBCol","MDBContainer","MDBRow","jsxDEV","_jsxDEV","App","_s","roleSettingsModal","setRoleSettingsModal","users","setUsers","userNumId","setUserNumId","userId","setUserId","userName","setUserName","userInfo","setUserInfo","userToView","setUserToView","userPrivInfo","setUserPrivInfo","editMode","setEditMode","toggleEditMode","handleGetAnotherUserInfo","id","view","count","map","user","fetch","then","res","json","data","console","log","alert","handleCopyInfo","e","copy","preventDefault","handleSwitchRole","name","role","style","backgroundColor","color","height","children","fileName","_jsxFileName","lineNumber","columnNumber","canChangePrivlgs","edit_priv","className","lg","userNumid","_c","$RefreshReg$"],"sources":["/Users/mac/Desktop/University/4year/InfSec/soi3/client/src/App.tsx"],"sourcesContent":["import {useState, useEffect} from 'react';\nimport './App.css';\n\n// import components \nimport Modal from './components/Modal';\nimport Navbar from './components/Navbar';\nimport Profile from './components/Profile';\nimport UserInfo from './components/UserInfo';\nimport Privs from './components/Privs';\n\n// import ui components\nimport {\n  MDBCol,\n  MDBContainer,\n  MDBRow,\n} from 'mdb-react-ui-kit';\n\nfunction App() {\n  const [roleSettingsModal, setRoleSettingsModal] = useState(false);\n  const [users, setUsers] = useState<Array<user>>([]);\n  const [userNumId, setUserNumId] = useState<number>(1);\n  const [userId, setUserId] = useState<string>(\"@admin\");\n  const [userName, setUserName] = useState<string>(\"Admin\");\n  const [userInfo, setUserInfo] = useState<Info>();\n  const [userToView, setUserToView] = useState<string>(\"@admin\");\n  const [userPrivInfo, setUserPrivInfo] = useState<Privs>();\n  const [editMode, setEditMode] = useState(false);\n  \n  // turn on or off editing users info\n  const toggleEditMode = () => setEditMode(!editMode);\n  \n  // check privlgs of user and get another user info\n  const handleGetAnotherUserInfo = (id: string) => {\n    if(userPrivInfo?.view != \"0\")\n    {\n      // Retrieving another user info\n      setUserToView(id);\n      let count = 1;\n      users.map((user : user) => {\n        if(user.id == id) {\n          fetch(`http://localhost:5000/get_user_info?id=${count}`).then(\n            res => res.json()\n          ).then(\n            data => {\n              setUserInfo(data)\n              console.log(data)\n            }\n          );\n        }\n        count++;\n      })\n      console.log(\"\\nyou are viewing \", id);\n    }\n    else {\n      alert(\"Not enough privilliges!\");\n    }\n  }\n  \n  // check privgs for copying info\n  const handleCopyInfo = (e : any) => {\n    if(userPrivInfo?.copy == \"0\")\n    {\n      e.preventDefault();\n      alert(\"Not enough privilliges!\")\n      return false;      \n    }\n  }\n  \n  // log in as another user\n  const handleSwitchRole = (id : string) => {\n    setUserId(id);\n    console.log(\"id : \", userId);\n    let count = 1;\n    users.map((user : user) => {\n      if(user.id == id) {\n        setUserNumId(count);\n        setUserName(user.name);\n        console.log(\"found user\", user)\n        \n        // Get user info\n        fetch(`http://localhost:5000/get_user_info?id=${count}`).then(\n          res => res.json()\n        ).then(\n          data => {\n            setUserInfo(data)\n            console.log(data)\n          }\n        )\n        // Get user privilleges\n        fetch(`http://localhost:5000/get_role_priv?role=${user.role}`).then(\n          res => res.json()\n        ).then(\n          data => {\n            setUserPrivInfo(data)\n            console.log(\"privs: \", data);\n          }\n        )\n      }\n      count++;\n    })\n    console.log(\"\\nyou are now \", id);\n  }\n  \n  useEffect(() => {\n    fetch(\"http://localhost:5000/get_users\").then(\n      res => res.json()\n    ).then(\n      data => {\n        setUsers(data)\n        console.log(data)\n      }\n    );\n  }, [])\n  \n  return (\n    <section style={{ backgroundColor: '#0D1116', color: 'white', height: \"100%\" }}>\n      \n      {/* Modal with settings */}\n      <Modal roleSettingsModal={roleSettingsModal} setRoleSettingsModal={setRoleSettingsModal}/>\n      \n      {/* Navigation bar */}\n      <Navbar users={users} handleSwitchRole={handleSwitchRole} roleSettingsModal={roleSettingsModal} setRoleSettingsModal={setRoleSettingsModal} canChangePrivlgs={userPrivInfo?.edit_priv !=\"0\" ? true : false}/>\n      \n      {/* Main content */}\n      <MDBContainer className=\"py-5 mt-4\">\n        <MDBRow>\n          <MDBCol lg=\"4\">\n            \n            {/* Card for profile avatar and actions */}\n            <Profile userName={userName} userId={userId}/>\n          \n          </MDBCol>\n          <MDBCol lg=\"8\">\n            \n            {/* Card with important selected info */}\n            <UserInfo users={users} handleGetAnotherUserInfo={handleGetAnotherUserInfo} editMode={editMode} userInfo={userInfo} handleCopyInfo={handleCopyInfo} toggleEditMode={toggleEditMode} userPrivInfo={userPrivInfo} userId={userId} userNumid={userNumId}/>\n            \n            <MDBRow>\n              <MDBCol>\n                \n                {/* Card showing which rights do u have */}\n                <Privs userPrivInfo={userPrivInfo} />\n              \n              </MDBCol>\n            </MDBRow>\n          </MDBCol>\n        </MDBRow>\n      </MDBContainer>\n    </section>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}